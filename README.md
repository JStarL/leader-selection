# leader-selection
A leader selection mechanism for decentralised sequencers in Layer 2 ZK Rollups in blockchains, written in Rust.

# Description
The purpose of this project is to demonstrate a fair leader selection mechanism in the scenario of decentralised sequencers in Layer 2 ZKRollups in blockchains. Currently, the majority of rollups have a *centralised sequencer*, which goes against the very tenets of decentralisation and what makes blockchain attractive in the first place

## Drawbacks of a centralised sequencer
* Potential Malicious Behaviour
    * Strong censorship of transactions
        * Excluding certain transactions from the block
    * Weak censorshp
        * Delaying certain transactions from being processed indefinitely
    * Maximal Extractable Value (MEV) manipulation
        * Ordering transactions in a way that benefits the sequencer and puts users at a disadvantage
* Single Point of Failure

# What this project is
This project is one small part of the whole project, which is to answer the question

* How do you setup a decentralised sequencers environment?

This is how it works:
* To have decentralised sequencers, you need to have more than one sequencer
* There are different ways to approach this, but one way to propose new blocks is for a single sequencer to propose a new block at a time
* For this, time is split into epochs
* In each epoch a leader is selected
* This leader is the one who proposes the new block
* Other nodes vote (sign) on the block
* Leader passes block to executor

In order to decide who should be the leader for a given round, we have the current leader selection process. This process is a *score calculation mechanism*

# Score Calculation Mechanism

The scoring mechanism depends on the following factors:
* Funds staked
    * The more the funds staked, the greater the probability of being a leader
    * We take the logarithm of funds to prevent the disadvantage that new sequencers have when faced against nodes who have significantly higher stakes
* A random number in the range \[0,1\] generated by a Verifiable Random Function (VRF)
    * This is the random factor
    * This is seeded with publicly known inputs
        * This is for the sake of verification by other nodes so that nodes cannot lie about their score and artificially become a leader
        * For this reason it must be seeded with publicly known inputs
* Reputation Points
    * This tells us how reliable a given node is
    * Depends on a history of trustworthiness
    * Starts off at default value
    * If honest, value incremented
    * If dishonest, value reset
    * We take the logarithm of this value, to prevent excessive gains
* Rounds Delay
    * This is the measurement of how long it has been since a given node has last acted as a sequencer
    * The greater the time, the greater the probability
    * Again, we take the logarithm so that malicious nodes cannot act as sequencers soon after being caught

# Malicious Activity

On identification of malicious activity
* The stake of the malicious node is distributed evenly amongst other nodes
* Money is seeded into the system, with the malicious node getting an arbitrary amount of money in the range 0..=12

